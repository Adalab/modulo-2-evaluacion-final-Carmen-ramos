"use strict";const inputEl=document.querySelector(".js-input"),buttonEl=document.querySelector(".js-button"),ulShowList=document.querySelector(".js-showList"),ulFavList=document.querySelector(".js-favList"),resetFavButton=document.querySelector(".js-reset");let imgDefault="././assets/images/tvSeries.jpg",showsList=[],favoritesList=[];function getApiData(){getFromLocalStorage();const t=inputEl.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{showsList=[];for(let e=0;e<t.length;e++)showsList.push(t[e].show);paintList()})}buttonEl.addEventListener("click",getApiData);const formElement=document.querySelector(".js-form");function handleForm(t){t.preventDefault()}function paintList(){let t="";for(const e of showsList){let s;s=isShowFav(e)?"favourite":"",t+=`<li class = "js-shows ${s} showli" id=${e.id}>`,t+=`<h3 class="showli__title">${e.name}</h2>`,null===e.image?t+=`<img src= ${imgDefault} class= "showli__image" title="image default">`:t+=`<img src= ${e.image.medium} class= "showli__image" title="show image">`,t+="</li>"}ulShowList.innerHTML=t,paintFavList(),listenShowsEvents()}function isShowFav(t){return void 0!==favoritesList.find(e=>e.id===t.id)}function listenShowsEvents(){const t=document.querySelectorAll(".js-shows");for(const e of t)e.addEventListener("click",handleShow)}function handleShow(t){const e=parseInt(t.currentTarget.id),s=showsList.find(t=>t.id===e),i=favoritesList.findIndex(t=>t.id===e);-1===i?favoritesList.push(s):favoritesList.splice(i,1),setInLocalStorage(),paintFavList(),paintList()}function paintFavList(){let t="";for(const e of favoritesList)t+='<div class= "favli-container">',t+=`<li class = " favli" id=${e.id}>`,t+=`<h3 class="favli__title">${e.name}</h2>`,null===e.image?t+=`<img src= ${imgDefault} class= "favli__img">`:t+=`<img src= ${e.image.medium} class= "favli__img">`,t+=`<button class='favli__button js-remove' id=${e.id}>Eliminar</button>`,t+="</li>",t+="</div>";ulFavList.innerHTML=t,listenRemoveFavElements()}function listenRemoveFavElements(){const t=document.querySelectorAll(".js-remove");for(const e of t)e.addEventListener("click",handleRemoveFavElements)}function handleRemoveFavElements(t){const e=parseInt(t.currentTarget.id),s=favoritesList.findIndex(t=>t.id===e);-1!==s&&favoritesList.splice(s,1),setInLocalStorage(),paintFavList(),paintList()}function resetFav(){favoritesList=[],paintFavList(),paintList(),setInLocalStorage()}function setInLocalStorage(){localStorage.setItem("listFavLocal",JSON.stringify(favoritesList))}function getFromLocalStorage(){const t=localStorage.getItem("listFavLocal");null!==t&&(favoritesList=JSON.parse(t),console.log(favoritesList),paintFavList())}formElement.addEventListener("submit",handleForm),resetFavButton.addEventListener("click",resetFav),getFromLocalStorage();